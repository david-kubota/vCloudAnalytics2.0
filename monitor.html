<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hudl TV Multi-View Monitor v4</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { background-color: #020617; color: #f8fafc; margin: 0; height: 100vh; overflow: hidden; }
        .grid-container { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 12px; height: calc(100vh - 48px); padding: 12px; }
        .viewport-card { background: #1e293b; border: 1px solid #334155; border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; }
        
        /* Video Container at Top */
        .video-box { width: 100%; aspect-ratio: 16/9; background: #000; position: relative; flex-shrink: 0; }
        .video-box iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }

        /* Data Section Below Video */
        .data-section { flex: 1; padding: 12px; overflow-y: auto; background: #0f172a; }
        
        .label { font-size: 10px; color: #94a3b8; font-weight: 800; text-transform: uppercase; margin-bottom: 2px; }
        .value { font-size: 13px; color: #f8fafc; margin-bottom: 8px; }
        
        .status-badge { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 800; background: rgba(34, 197, 94, 0.1); color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.3); }
        
        select { background: #1e293b; border: 1px solid #334155; color: white; border-radius: 4px; padding: 6px; width: 100%; font-size: 12px; }
        
        #init-loader { position: fixed; inset: 0; background: #020617; display: flex; align-items: center; justify-content: center; z-index: 100; font-family: sans-serif; color: #64748b; }
    </style>
</head>
<body>

    <div id="init-loader">Initializing Stacked Multi-View...</div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Viewport = ({ index }) => {
            const [idInput, setIdInput] = useState("");
            const [activeId, setActiveId] = useState(null);
            const [quality, setQuality] = useState("");

            const handleLoad = (e) => {
                e.preventDefault();
                let id = idInput.trim();
                const match = idInput.match(/\/embed\/(\d+)/);
                if (match) id = match[1];
                if (id && !isNaN(id)) setActiveId(id);
            };

            // Viewport Setup: Empty State
            if (!activeId) {
                return (
                    <div className="viewport-card items-center justify-center p-8 bg-slate-900/50 border-dashed border-2 border-slate-800">
                        <form onSubmit={handleLoad} className="w-full max-w-xs space-y-4">
                            <div className="text-slate-500 text-xs font-bold uppercase mb-2 text-center">Viewport {index + 1}</div>
                            <input 
                                type="text" 
                                placeholder="Paste Broadcast ID or URL" 
                                className="w-full bg-slate-950 border border-slate-700 p-2 rounded text-sm text-center focus:border-orange-500 outline-none"
                                value={idInput}
                                onChange={(e) => setIdInput(e.target.value)}
                            />
                            <button className="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 rounded text-xs uppercase tracking-widest transition">
                                Start Monitoring
                            </button>
                        </form>
                    </div>
                );
            }

            // Viewport Setup: Active Monitoring (Stacked Layout)
            return (
                <div className="viewport-card shadow-2xl">
                    {/* Header Bar */}
                    <div className="bg-slate-800 px-3 py-2 border-b border-slate-700 flex justify-between items-center h-10 flex-shrink-0">
                        <div className="flex items-center gap-4">
                            <span className="text-[10px] font-black text-slate-400">V{index + 1}</span>
                            <div className="status-badge">
                                <span className="h-1.5 w-1.5 bg-green-500 rounded-full animate-pulse"></span> STREAMING
                            </div>
                        </div>
                        <button onClick={() => {setActiveId(null); setIdInput("");}} className="text-slate-400 hover:text-red-500 font-bold text-xl">&times;</button>
                    </div>

                    {/* VIDEO PLAYER (TOP) */}
                    <div className="video-box">
                        <iframe src={`https://vcloud.hudl.com/broadcast/embed/${activeId}?autoplay=1`} allow="autoplay; fullscreen"></iframe>
                    </div>

                    {/* DATA FIELDS (BOTTOM) */}
                    <div className="data-section">
                        <div className="grid grid-cols-2 gap-4">
                            
                            {/* Generic Details */}
                            <div className="col-span-2">
                                <div className="label">Broadcast Title</div>
                                <div className="value font-bold text-orange-400">Varsity Matchup - ID: {activeId}</div>
                            </div>

                            <div>
                                <div className="label">Site / School</div>
                                <div className="value">Lincoln East High School</div>
                            </div>
                            <div>
                                <div className="label">Scheduled Date</div>
                                <div className="value">02/16/2026 @ 7:00 PM</div>
                            </div>

                            {/* Contact Details */}
                            <div className="col-span-2 bg-slate-900 border border-slate-800 p-3 rounded mt-2">
                                <div className="label text-blue-400 mb-2">Primary Contact Details</div>
                                <div className="grid grid-cols-2 gap-2">
                                    <div>
                                        <div className="text-[10px] text-slate-500 italic">Name</div>
                                        <div className="text-xs">John Smith</div>
                                    </div>
                                    <div>
                                        <div className="text-[10px] text-slate-500 italic">Phone</div>
                                        <div className="text-xs text-orange-200">555-0199</div>
                                    </div>
                                    <div className="col-span-2">
                                        <div className="text-[10px] text-slate-500 italic">Email</div>
                                        <div className="text-xs text-orange-200">jsmith@lincolneast.edu</div>
                                    </div>
                                </div>
                            </div>

                            {/* Quality Dropdown */}
                            <div>
                                <div className="label">Quality Check</div>
                                <select value={quality} onChange={(e) => setQuality(e.target.value)}>
                                    <option value="">Select Option...</option>
                                    <option value="good">Overall Good</option>
                                    <option value="audio">Poor / No Audio</option>
                                    <option value="video">Poor / No Video</option>
                                    <option value="scoreboard">No Scoreboard</option>
                                    <option value="delayed">Delayed</option>
                                </select>
                            </div>

                            {/* Admin Link */}
                            <div className="flex flex-col justify-end">
                                <a 
                                    href={`https://hudl.com/admin/broadcast/${activeId}`} 
                                    target="_blank" 
                                    className="bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-bold py-2 rounded text-center border border-slate-600 transition uppercase"
                                >
                                    Broadcast Details Page
                                </a>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const Main = () => {
            useEffect(() => {
                const loader = document.getElementById('init-loader');
                if (loader) loader.style.display = 'none';
            }, []);

            return (
                <div className="flex flex-col h-screen">
                    <div className="h-12 bg-slate-900 border-b border-slate-700 flex items-center px-6 justify-between flex-shrink-0">
                        <div className="font-bold text-xs tracking-widest"><span className="text-orange-500">HUDL TV</span> COMMAND CENTER</div>
                        <a href="index.html" className="text-[10px] text-slate-500 hover:text-white uppercase font-bold tracking-widest transition">Exit to Menu</a>
                    </div>
                    <div className="grid-container">
                        <Viewport index={0} />
                        <Viewport index={1} />
                        <Viewport index={2} />
                        <Viewport index={3} />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Main />);
    </script>
</body>
</html>
