<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hudl TV Multi-View Monitor</title>

<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background-color: #0f172a; color: #f8fafc; font-family: system-ui, -apple-system, sans-serif; height: 100vh; overflow: hidden; margin: 0; }
  
  /* Iframe Container */
  .video-container { position: relative; width: 100%; height: 100%; background: #000; }
  .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
  
  /* Error Log */
  #error-log { display: none; background: #450a0a; color: #fca5a5; padding: 1rem; position: fixed; bottom: 0; left: 0; right: 0; z-index: 9999; font-family: monospace; border-top: 2px solid #ef4444; }

  /* Loading State */
  #loading { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #94a3b8; }
</style>

<script>
  window.onerror = function(msg, url, line) {
    const el = document.getElementById('error-log');
    if (el) {
      el.style.display = 'block';
      el.innerHTML += `<div><strong>Error:</strong> ${msg} (Line ${line})</div>`;
    }
  };
</script>

<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>

<div id="root"></div>
<div id="loading">Loading Monitor...</div>
<div id="error-log"></div>

<script type="text/babel">
  const { useState, useMemo } = React;

  // --- ICONS (Defined manually to avoid dependency issues) ---
  const Icon = ({ name, size = 16, className }) => {
    const style = { width: size, height: size };
    if (name === 'x') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
    if (name === 'play') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>;
    if (name === 'monitor') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>;
    if (name === 'user') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;
    if (name === 'phone') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>;
    if (name === 'mail') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>;
    if (name === 'external') return <svg xmlns="http://www.w3.org/2000/svg" style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>;
    return null;
  };

  // --- SLOT COMPONENT ---
  const Slot = ({ index }) => {
    const [urlInput, setUrlInput] = useState("");
    const [activeId, setActiveId] = useState(null);
    const [error, setError] = useState(null);
    const [quality, setQuality] = useState("");

    // --- PLACEHOLDER DATA GENERATOR ---
    const fakeData = useMemo(() => {
      if (!activeId) return null;
      return {
        title: "Varsity Football vs. Westlake High",
        site: "Lincoln East High School",
        section: "Boys Varsity Football",
        status: "Streaming",
        date: new Date().toLocaleString(),
        contact: {
          name: "Coach John Smith",
          phone: "555-0123",
          email: "john.smith@lincolneast.edu"
        }
      };
    }, [activeId]);

    const loadStream = (e) => {
      e.preventDefault();
      setError(null);
      let id = urlInput.trim();
      // Extract ID if full URL is pasted
      const match = urlInput.match(/\/embed\/(\d+)/);
      if (match) id = match[1];

      if (!id || isNaN(id)) {
        setError("Please enter a valid numeric Broadcast ID.");
        return;
      }
      setActiveId(id);
    };

    const clearSlot = () => {
      setActiveId(null);
      setUrlInput("");
      setQuality("");
      setError(null);
    };

    if (activeId && fakeData) {
      return (
        <div className="flex flex-col h-full bg-slate-900 border border-slate-700 rounded-lg overflow-hidden relative shadow-lg">
          {/* Header Overlay */}
          <div className="bg-slate-800 px-3 py-1 flex justify-between items-center border-b border-slate-700 h-8 flex-shrink-0">
             <div className="flex items-center gap-2">
                <span className="text-xs font-bold text-slate-400">SLOT {index + 1}</span>
                <span className="bg-green-900/30 text-green-400 text-[10px] uppercase font-bold px-1.5 py-0.5 rounded border border-green-900 flex items-center gap-1">
                  <span className="h-2 w-2 bg-green-500 rounded-full animate-pulse"></span> {fakeData.status}
                </span>
             </div>
             <button onClick={clearSlot} className="text-slate-400 hover:text-red-400"><Icon name="x" size={14} /></button>
          </div>
          
          {/* Video Player */}
          <div className="w-full relative bg-black aspect-video">
             <div className="video-container">
               <iframe 
                 src={`https://vcloud.hudl.com/broadcast/embed/${activeId}?autoplay=1`} 
                 allow="autoplay; fullscreen"
               ></iframe>
             </div>
          </div>

          {/* Details Panel */}
          <div className="flex-1 bg-slate-900 p-3 overflow-y-auto text-sm border-t border-slate-700">
            <div className="mb-3">
              <h3 className="font-bold text-white truncate" title={fakeData.title}>{fakeData.title}</h3>
              <div className="text-slate-400 text-xs truncate">{fakeData.site} ‚Ä¢ {fakeData.section}</div>
              <div className="text-slate-500 text-[10px] mt-0.5">{fakeData.date}</div>
            </div>

            {/* Controls */}
            <div className="grid grid-cols-2 gap-3 mb-3">
               <div>
                 <label className="block text-[10px] uppercase font-bold text-slate-500 mb-1">Quality</label>
                 <select 
                    value={quality} 
                    onChange={(e) => setQuality(e.target.value)}
                    className="w-full bg-slate-800 border border-slate-600 text-white text-xs rounded px-2 py-1 focus:border-orange-500 focus:outline-none"
                 >
                   <option value="" disabled>Select...</option>
                   <option value="good">‚úÖ Good</option>
                   <option value="audio">üîá Audio Issue</option>
                   <option value="video">‚¨õ Video Issue</option>
                   <option value="delay">üê¢ Delayed</option>
                 </select>
               </div>
               <div>
                 <label className="block text-[10px] uppercase font-bold text-slate-500 mb-1">Actions</label>
                 <a 
                   href={`https://hudl.com/admin/broadcast/${activeId}`} 
                   target="_blank"
                   className="flex items-center justify-center gap-1 w-full bg-slate-700 hover:bg-slate-600 text-white py-1 px-2 rounded text-xs transition border border-slate-600"
                 >
                   <span>Details</span>
                   <Icon name="external" size={10} />
                 </a>
               </div>
            </div>

            {/* Contact Card */}
            <div className="bg-slate-800/50 rounded border border-slate-700/50 p-2">
              <div className="text-[10px] uppercase font-bold text-slate-500 mb-1.5 flex items-center gap-1">
                <Icon name="user" size={10} /> Primary Contact
              </div>
              <div className="font-medium text-slate-200 text-xs mb-1">{fakeData.contact.name}</div>
              <div className="space-y-1">
                <div className="flex items-center gap-2 text-slate-400 text-xs">
                  <Icon name="phone" size={12} /> {fakeData.contact.phone}
                </div>
                <div className="flex items-center gap-2 text-slate-400 text-xs truncate">
                  <Icon name="mail" size={12} /> 
                  <span className="truncate">{fakeData.contact.email}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // Empty State
    return (
      <div className="flex flex-col h-full bg-slate-800/30 border border-slate-700 border-dashed rounded-lg items-center justify-center p-6 transition hover:bg-slate-800/50">
        <div className="text-slate-600 mb-4"><Icon name="monitor" size={48} /></div>
        <form onSubmit={loadStream} className="w-full max-w-xs flex flex-col gap-2">
          <input 
            type="text" 
            placeholder="Broadcast ID or URL..." 
            className="w-full p-2 text-sm rounded bg-slate-900 border border-slate-600 text-center text-white focus:border-orange-500 focus:outline-none"
            value={urlInput}
            onChange={(e) => setUrlInput(e.target.value)}
          />
          <button 
            type="submit"
            disabled={!urlInput}
            className="bg-orange-600 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed text-white text-xs font-bold py-2 rounded transition flex items-center justify-center gap-2"
          >
            <Icon name="play" size={14} /> WATCH
          </button>
          {error && <div className="text-red-400 text-[10px] text-center mt-1">{error}</div>}
        </form>
      </div>
    );
  };

  // --- APP COMPONENT ---
  const App = () => {
    // Hide loading div once React mounts
    useEffect(() => {
      const loader = document.getElementById('loading');
      if(loader) loader.style.display = 'none';
    }, []);

    return (
      <div className="flex flex-col h-screen bg-slate-950">
        {/* Top Bar */}
        <div className="h-12 bg-slate-900 border-b border-slate-700 flex items-center px-4 justify-between flex-shrink-0">
          <h1 className="font-bold text-sm text-slate-100 flex items-center gap-2">
            <span className="text-orange-500"><Icon name="monitor" size={18} /></span> Multi-View Monitor
          </h1>
          <a href="index.html" className="text-xs text-slate-400 hover:text-white transition">‚Üê Back to Menu</a>
        </div>

        {/* 2x2 Grid */}
        <div className="flex-1 p-3 grid grid-cols-2 grid-rows-2 gap-3 min-h-0">
          <Slot index={0} />
          <Slot index={1} />
          <Slot index={2} />
          <Slot index={3} />
        </div>
      </div>
    );
  };

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<App />);
</script>

</body>
</html>
