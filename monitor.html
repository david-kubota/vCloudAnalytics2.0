<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hudl Multi-View Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #0f172a; --card-bg: #1e293b; --border: #334155; --primary: #f97316; }
        body { margin: 0; background-color: var(--bg); color: #f8fafc; font-family: ui-sans-serif, system-ui, sans-serif; overflow-y: auto; overflow-x: hidden; }
        
        /* Top Bar */
        .top-bar { height: 50px; background: #020617; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; position: sticky; top: 0; z-index: 100; }
        
        /* Main Layout */
        .monitor-grid { height: calc(100vh - 50px); display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 8px; padding: 8px; border-bottom: 2px solid var(--border); }
        
        .viewport { background: var(--card-bg); border: 1px solid var(--border); border-radius: 6px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        /* 90/10 Split */
        .video-wrapper { height: 90%; width: 100%; background: #000; position: relative; }
        iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        
        .data-bar { height: 10%; background: #151e2e; display: flex; align-items: center; justify-content: space-between; padding: 0 12px; border-top: 1px solid var(--border); gap: 10px; }
        
        /* Data Elements */
        .info-group { display: flex; align-items: center; gap: 10px; overflow: hidden; white-space: nowrap; flex: 1; }
        .b-title { font-size: 13px; font-weight: 700; color: #fff; text-overflow: ellipsis; overflow: hidden; }
        .b-date { font-size: 11px; color: #94a3b8; font-weight: 500; }
        
        .b-status { font-size: 10px; font-weight: 800; text-transform: uppercase; padding: 2px 6px; border-radius: 4px; background: rgba(16, 185, 129, 0.15); color: #4ade80; border: 1px solid rgba(16, 185, 129, 0.3); display: flex; align-items: center; gap: 4px; }
        .pulse { width: 6px; height: 6px; background: #4ade80; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        .controls-group { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
        select { background: #0f172a; border: 1px solid var(--border); color: white; padding: 2px 6px; border-radius: 4px; font-size: 11px; height: 26px; outline: none; }
        
        .action-btn { display: flex; align-items: center; justify-content: center; width: 26px; height: 26px; rounded: 4px; background: #1e293b; border: 1px solid var(--border); cursor: pointer; transition: 0.2s; border-radius: 4px; text-decoration: none; }
        .action-btn:hover { background: #334155; }
        .slack-btn:hover { background: #4A154B; border-color: #611f69; color: white; } /* Slack Purple */

        /* Empty State */
        .empty-state { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* Queue Panel (Below the fold) */
        .queue-panel { padding: 20px; min-height: 400px; background: #0f172a; }
        .queue-table { width: 100%; text-align: left; font-size: 12px; border-collapse: collapse; background: var(--card-bg); border-radius: 8px; overflow: hidden; border: 1px solid var(--border); }
        .queue-table th { padding: 12px; background: rgba(0,0,0,0.3); color: #94a3b8; font-size: 10px; text-transform: uppercase; }
        .queue-table td { padding: 12px; border-bottom: 1px solid var(--border); color: #e2e8f0; }
        .queue-table tr:hover { background: rgba(255,255,255,0.03); cursor: grab; }

        .close-btn { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.6); color: white; border: none; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; z-index: 20; font-weight: bold; }
        .close-btn:hover { background: #ef4444; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="font-black text-sm tracking-widest">HUDL <span class="text-orange-500">MONITOR</span></div>
        <div class="flex items-center gap-6">
            <a href="manager.html" class="bg-slate-800 hover:bg-slate-700 text-white text-[11px] font-bold px-4 py-1.5 rounded border border-slate-600 transition">Support Manager Dashboard</a>
            <a href="index.html" class="text-xs text-slate-400 hover:text-white font-semibold">Exit to Menu</a>
        </div>
    </div>

    <div class="monitor-grid" id="monitor-grid"></div>

    <div class="queue-panel">
        <div class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex justify-between items-center">
            <span>Drag & Drop Queue</span>
            <span class="bg-slate-800 px-3 py-1 rounded text-[10px]" id="queue-count">16 Pending</span>
        </div>
        <table class="queue-table">
            <thead><tr><th style="width: 30px;"></th><th>Sport</th><th>Title</th><th>Time</th><th>Site</th><th>Status</th></tr></thead>
            <tbody id="queue-body"></tbody>
        </table>
    </div>

    <script>
        const viewports = [
            { id: 0, streamId: null },
            { id: 1, streamId: null },
            { id: 2, streamId: null },
            { id: 3, streamId: null }
        ];

        // 16 Real Broadcast IDs + Dummy Data
        const queueData = [
            { id: 3064927, sport: "ðŸ€", title: "Varsity Boys vs. Tigers", time: "7:00 PM", site: "Central HS", status: "Upcoming" },
            { id: 3065104, sport: "ðŸ", title: "Regional Volleyball Finals", time: "7:30 PM", site: "Westside Gym", status: "Upcoming" },
            { id: 3064926, sport: "ðŸ¤¼", title: "State Wrestling Tournament", time: "8:00 PM", site: "Arena A", status: "Upcoming" },
            { id: 3064925, sport: "âš½", title: "Girls Soccer District Match", time: "5:15 PM", site: "North Field", status: "Late" },
            { id: 3065103, sport: "ðŸ’", title: "Ice Hockey Semi-Finals", time: "8:30 PM", site: "Ice Plex", status: "Upcoming" },
            { id: 3065101, sport: "ðŸ€", title: "JV Boys Basketball", time: "5:00 PM", site: "Central HS", status: "Live" },
            { id: 3192732, sport: "ðŸˆ", title: "Friday Night Lights: Playoffs", time: "7:00 PM", site: "Memorial Stadium", status: "Upcoming" },
            { id: 3041453, sport: "âš¾", title: "Varsity Baseball Opener", time: "4:00 PM", site: "East Field", status: "Upcoming" },
            { id: 3041433, sport: "ðŸ¥Ž", title: "Girls Softball Doubleheader", time: "4:30 PM", site: "South Park", status: "Upcoming" },
            { id: 3041505, sport: "ðŸ“£", title: "Cheer & Dance Competition", time: "6:00 PM", site: "Main Gym", status: "Upcoming" },
            { id: 3041407, sport: "ðŸ‘Ÿ", title: "Track and Field Qualifier", time: "3:00 PM", site: "High School Track", status: "Live" },
            { id: 3041373, sport: "ðŸŠ", title: "Swimming Regionals Day 1", time: "5:00 PM", site: "Aquatics Center", status: "Upcoming" },
            { id: 3041531, sport: "ðŸ€", title: "Freshman Boys Basketball", time: "4:00 PM", site: "West Gym", status: "Live" },
            { id: 3041557, sport: "ðŸ", title: "JV Volleyball", time: "5:30 PM", site: "East Gym", status: "Upcoming" },
            { id: 3054036, sport: "ðŸ¤¼", title: "JV Wrestling Dual", time: "6:00 PM", site: "Arena B", status: "Upcoming" },
            { id: 3093874, sport: "âš½", title: "Boys Soccer Championships", time: "7:30 PM", site: "North Field", status: "Upcoming" }
        ];

        function renderMonitor() {
            const grid = document.getElementById('monitor-grid');
            grid.innerHTML = '';

            viewports.forEach((vp, index) => {
                const el = document.createElement('div');
                el.className = 'viewport';

                if (!vp.streamId) {
                    el.innerHTML = `
                        <div class="empty-state">
                            <div class="text-xs font-bold text-slate-500 uppercase mb-2">Viewport ${index + 1}</div>
                            <input type="text" id="input-${index}" class="bg-slate-900 border border-slate-700 p-2 rounded text-xs text-center w-48 mb-2" placeholder="ID or Drag from Queue">
                            <button class="bg-orange-600 text-white text-[10px] font-bold px-4 py-1.5 rounded uppercase hover:bg-orange-500 transition" onclick="loadStream(${index})">Load</button>
                        </div>
                    `;
                } else {
                    el.innerHTML = `
                        <button class="close-btn" onclick="clearStream(${index})" title="Close Viewport">&times;</button>
                        <div class="video-wrapper">
                            <iframe src="https://vcloud.hudl.com/broadcast/embed/${vp.streamId}?autoplay=1" allow="autoplay; fullscreen"></iframe>
                        </div>
                        <div class="data-bar">
                            <div class="info-group">
                                <div class="b-status"><div class="pulse"></div> LIVE</div>
                                <div class="b-title" title="Broadcast ID: ${vp.streamId}">Broadcast ID: ${vp.streamId}</div>
                                
                                <a href="#" class="text-slate-400 hover:text-white transition text-sm" title="View Broadcast Details in Admin">â“˜</a>
                                
                                <div class="b-date">Today @ 7:00 PM</div>
                            </div>
                            
                            <div class="controls-group">
                                <select>
                                    <option>Quality: Good</option>
                                    <option>Audio Issue</option>
                                    <option>Video Issue</option>
                                    <option>No Scoreboard</option>
                                </select>

                                <div class="relative group cursor-pointer action-btn text-xs" title="View Contact Info">
                                    ðŸ“ž
                                    <div class="absolute bottom-full right-0 mb-2 hidden group-hover:block bg-slate-800 border border-slate-600 p-3 rounded shadow-xl z-50 whitespace-nowrap text-left">
                                        <div class="text-[10px] text-slate-400 uppercase font-bold mb-1">Primary Contact</div>
                                        <div class="text-sm font-bold text-white">John Smith (AD)</div>
                                        <div class="text-xs text-orange-400 mt-1 font-mono">555-0199</div>
                                    </div>
                                </div>

                                <button class="action-btn slack-btn text-xs font-bold" title="Send Slack Message" onclick="alert('Slack message sent to Ops channel regarding Broadcast ${vp.streamId}')">
                                    #
                                </button>
                            </div>
                        </div>
                    `;
                }
                grid.appendChild(el);
            });
        }

        function renderQueue() {
            document.getElementById('queue-count').innerText = `${queueData.length} Pending`;
            document.getElementById('queue-body').innerHTML = queueData.map(row => `
                <tr draggable="true" ondragstart="event.dataTransfer.setData('text/plain', '${row.id}')">
                    <td class="text-slate-500 cursor-grab">â‹®â‹®</td>
                    <td class="text-xl">${row.sport}</td>
                    <td>
                        <div class="font-bold text-white">${row.title}</div>
                        <div class="text-[10px] text-slate-500 font-mono mt-0.5">ID: ${row.id}</div>
                    </td>
                    <td>${row.time}</td>
                    <td>${row.site}</td>
                    <td><span class="text-[9px] font-bold uppercase ${row.status === 'Late' ? 'text-red-400' : 'text-slate-400'}">${row.status}</span></td>
                </tr>
            `).join('');
        }

        function loadStream(index) {
            let val = document.getElementById(`input-${index}`).value.trim();
            const match = val.match(/\/embed\/(\d+)/) || val.match(/broadcast\/(\d+)/);
            if (match) val = match[1];
            if (val) { viewports[index].streamId = val; renderMonitor(); }
        }

        function clearStream(index) { viewports[index].streamId = null; renderMonitor(); }

        document.addEventListener('dragover', e => e.preventDefault());
        document.addEventListener('drop', e => {
            e.preventDefault();
            const id = e.dataTransfer.getData("text/plain");
            if (id) {
                const emptySlot = viewports.findIndex(v => v.streamId === null);
                viewports[emptySlot !== -1 ? emptySlot : 0].streamId = id;
                renderMonitor();
            }
        });

        renderMonitor(); 
        renderQueue();
    </script>
</body>
</html>
