<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hudl TV Multi-View</title>

<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.tailwindcss.com"></script>

<style>
  body { background-color: #0f172a; color: #f8fafc; font-family: system-ui, -apple-system, sans-serif; height: 100vh; overflow: hidden; margin: 0; }
  
  /* Iframe Container */
  .video-container { position: relative; width: 100%; height: 100%; background: #000; }
  .video-container iframe { width: 100%; height: 100%; border: none; }
  
  /* Inputs */
  input { background: #1e293b; border: 1px solid #334155; color: white; transition: all 0.2s; }
  input:focus { outline: none; border-color: #f97316; ring: 2px solid rgba(249, 115, 22, 0.2); }
  
  /* Custom Scrollbar for dashboard if needed */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-track { background: #0f172a; }
  ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
</style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
  const { useState, useEffect } = React;

  // --- ICONS ---
  const Icon = ({ name, size = 20 }) => {
    const icons = {
      x: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>,
      plus: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>,
      play: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>,
      monitor: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>
    };
    return icons[name] || null;
  };

  const Slot = ({ index }) => {
    const [urlInput, setUrlInput] = useState("");
    const [activeId, setActiveId] = useState(null);
    const [error, setError] = useState(null);

    const loadStream = (e) => {
      e.preventDefault();
      setError(null);
      
      // Extract ID from URL or use raw input
      // Supports: "3065104" OR "https://vcloud.hudl.com/broadcast/embed/3065104"
      let id = urlInput.trim();
      const match = urlInput.match(/\/embed\/(\d+)/);
      if (match) {
        id = match[1];
      }

      if (!id || isNaN(id)) {
        setError("Invalid Broadcast ID or URL");
        return;
      }
      setActiveId(id);
    };

    const clearSlot = () => {
      setActiveId(null);
      setUrlInput("");
      setError(null);
    };

    if (activeId) {
      return (
        <div className="flex flex-col h-full bg-slate-900 border border-slate-700 rounded-lg overflow-hidden relative shadow-lg group">
          {/* Header Overlay (Hidden unless hovered to keep view clean) */}
          <div className="absolute top-0 left-0 right-0 bg-gradient-to-b from-black/80 to-transparent p-2 flex justify-between items-center opacity-0 group-hover:opacity-100 transition z-10">
            <span className="text-xs font-mono text-slate-300 bg-slate-800/80 px-2 py-0.5 rounded">ID: {activeId}</span>
            <button 
              onClick={clearSlot} 
              className="bg-red-500/80 hover:bg-red-500 text-white p-1 rounded transition"
              title="Close Stream"
            >
              <Icon name="x" size={16} />
            </button>
          </div>
          
          <div className="video-container">
            <iframe 
              src={`https://vcloud.hudl.com/broadcast/embed/${activeId}?autoplay=1`} 
              allow="autoplay; fullscreen"
            ></iframe>
          </div>
        </div>
      );
    }

    return (
      <div className="flex flex-col h-full bg-slate-800/50 border border-slate-700 border-dashed rounded-lg items-center justify-center p-6 transition hover:bg-slate-800 hover:border-slate-600">
        <div className="text-slate-600 mb-4"><Icon name="monitor" size={48} /></div>
        <form onSubmit={loadStream} className="w-full max-w-xs flex flex-col gap-2">
          <input 
            type="text" 
            placeholder="Paste Broadcast ID or URL..." 
            className="w-full p-2 text-sm rounded text-center"
            value={urlInput}
            onChange={(e) => setUrlInput(e.target.value)}
          />
          <button 
            type="submit"
            disabled={!urlInput}
            className="bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm font-bold py-2 rounded transition flex items-center justify-center gap-2"
          >
            <Icon name="play" size={14} /> Watch Stream
          </button>
          {error && <div className="text-red-400 text-xs text-center mt-1">{error}</div>}
        </form>
      </div>
    );
  };

  const App = () => {
    return (
      <div className="flex flex-col h-screen">
        {/* Top Bar */}
        <div className="h-14 bg-slate-900 border-b border-slate-700 flex items-center px-6 justify-between flex-shrink-0">
          <h1 className="font-bold text-lg flex items-center gap-2">
            <span className="text-orange-500"><Icon name="monitor" /></span> Multi-View Monitor
          </h1>
          <div className="text-xs text-slate-500">Paste a Hudl TV URL into any slot to begin</div>
          <a href="index.html" className="text-sm text-slate-400 hover:text-white transition">‚Üê Back to Menu</a>
        </div>

        {/* 2x2 Grid */}
        <div className="flex-1 p-4 grid grid-cols-2 grid-rows-2 gap-4">
          <Slot index={0} />
          <Slot index={1} />
          <Slot index={2} />
          <Slot index={3} />
        </div>
      </div>
    );
  };

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<App />);
</script>

</body>
</html>
